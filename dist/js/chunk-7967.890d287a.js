(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7967"],{"1f9b":function(t,e,i){"use strict";var r=i("3271"),o=i.n(r);o.a},3271:function(t,e,i){},"55aa":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Form",{attrs:{model:t.formItem,"label-width":80}},[i("FormItem",{attrs:{label:"商品名称"}},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"Enter something..."},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),i("FormItem",{attrs:{label:"商品图片"}},[i("Upload",{attrs:{"before-upload":t.handleUpload,action:"http://upload.qiniup.com/",data:{token:t.qnToken},"on-success":t.uploadSuccess}},[i("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("选择图片")])],1),i("img",{directives:[{name:"show",rawName:"v-show",value:t.formItem.url,expression:"formItem.url"}],staticClass:"goods-img",attrs:{src:t.formItem.url}})],1),i("FormItem",{attrs:{label:"商品价格"}},[t._v("\n          VIP价格:\n          "),i("Input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.price1,callback:function(e){t.price1=e},expression:"price1"}}),t._v(" 元\n          经销商价格:\n          "),i("Input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.price2,callback:function(e){t.price2=e},expression:"price2"}}),t._v(" 元\n          总代理价格:\n          "),i("Input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.price3,callback:function(e){t.price3=e},expression:"price3"}}),t._v(" 元\n      ")],1),i("FormItem",{attrs:{label:"商品简介"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:t.formItem.detail,callback:function(e){t.$set(t.formItem,"detail",e)},expression:"formItem.detail"}})],1),i("FormItem",[i("Button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("提交")]),i("Button",{directives:[{name:"show",rawName:"v-show",value:!t.formItem.productId,expression:"!formItem.productId"}],staticStyle:{"margin-left":"8px"},nativeOn:{click:function(e){return t.clearForm(e)}}},[t._v("重置")])],1)],1)],1)},o=[],s=(i("28a5"),i("cadf"),i("551c"),i("097d"),{name:"goods_edit_page",data:function(){return{qnToken:"",price1:"",price2:"",price3:"",formItem:{name:"",url:"",detail:"",vipPriceDetail:""}}},created:function(){if(this.getQnToken(),this.$route.query.productId){this.formItem=this.$route.query;var t=this.formItem.vipPriceDetail.split(";");this.price1=t[0].split(":")[1],this.price2=t[1].split(":")[1],this.price3=t[2].split(":")[1]}},mounted:function(){},methods:{getQnToken:function(){var t=this;this.$api.getQnToken({}).then(function(e){200===e.code&&(t.qnToken=e.data.token)})},insertProduct:function(){var t=this;this.$api.insertProduct(this.formItem).then(function(e){200===e.code?(t.$Message.success("编辑成功"),t.$router.push({name:"goods_list_page"})):t.$Message.error(e.message)})},alterProduct:function(){var t=this;this.$api.alterProduct(this.formItem).then(function(e){200===e.code?(t.$Message.success("编辑成功"),t.$router.push({name:"goods_list_page"})):t.$Message.error(e.message)})},handleUpload:function(t){},uploadSuccess:function(t,e,i){this.formItem.url="http://7xwip7.com1.z0.glb.clouddn.com/"+t.key},submit:function(){this.formItem.vipPriceDetail="0:"+this.price1+";1:"+this.price2+";2:"+this.price3,this.$route.query.productId?this.alterProduct():this.insertProduct()},clearForm:function(){this.formItem={},this.price1="",this.price2="",this.price3=""}}}),n=s,a=(i("1f9b"),i("2877")),c=Object(a["a"])(n,r,o,!1,null,"269c517e",null);c.options.__file="goods-edit.vue";e["default"]=c.exports}}]);